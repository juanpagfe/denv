#!/bin/bash

#Install dependencies
if command -v apt-get >/dev/null; then

    sudo apt-get install rsync avahi-utils dnsutils net-tools ripgrep fzf maim \
        xdotool xclip neofetch zsh dmenu rofi i3 i3status network-manager \
        policykit-1-gnome make gcc build-essential wkhtmltopdf \
        unclutter-xfixes bear vim tmux ruby-dev stow feh pulseaudio-utils \
        fd-find catimg meld

    # Rust
    curl --proto '=https' --tlsv1.2 -sSf https://sh.rustup.rs | sh

    # Starship
    curl -sS https://starship.rs/install.sh | sh

    mkdir -p ~/.zsh
    curl -o ~/.zsh/zsh-history-substring-search.zsh \
         https://raw.githubusercontent.com/zsh-users/zsh-history-substring-search/master/zsh-history-substring-search.zsh

    source ~/.zsh/zsh-history-substring-search.zsh


    # Install MESLO NerdFonts
    sudo apt install fontconfig
    cd /tmp
    wget https://github.com/ryanoasis/nerd-fonts/releases/download/v2.1.0/Meslo.zip
    mkdir -p ~/.local/share/fonts
    unzip Meslo.zip -d ~/.local/share/fonts
    rm Meslo.zip
    cd -
    cd ~/.local/share/fonts
    rm *Windows*
    cd -
    fc-cache -fv
fi

if command -v brew >/dev/null; then
    brew install rsync xclip ffmpeg ripgrep tmux aerospace fzf pcre
fi

./deploy
